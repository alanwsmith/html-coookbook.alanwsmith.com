<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Input Example - The HTML, CSS, and JavaScript Cookbook Of Alan</title>
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Search Input Example" />
    <meta property="og:description" content="A quick look at the Search input form field type" />
    <meta
      property="og:image"
      content="https://res.cloudinary.com/awsimages/image/upload/w_1200,h_630/c_fit,co_rgb:222222,l_text:Helvetica_72_bold:Search%20Input%20Example,w_1080,h_480/fl_layer_apply,g_north_west,x_70,y_70/og-images/html-css-js--og-2022-10-24-blank.png"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site:id" content="@TheIdOfAlan" />
    <meta name="twitter:creator" content="@TheIdOfAlan" />
    <link
      rel="icon"
      type="image/png"
      sizes="228x228"
      href="/favicons/228x228.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="180x180"
      href="/favicons/180x180.png"
    />
    <link rel="stylesheet" href="/styles/global.css" />
    <link rel="stylesheet" href="/styles/prism.css" />
    
    <style>
      /* Any styles for the page go here */

    </style>
    <script>
      const fontsByPopularity = [
    { key: 'roboto', value: 'Roboto' },
    { key: 'opensans', value: 'OpenSans' },
    { key: 'montserrat', value: 'Montserrat' },
    { key: 'lato', value: 'Lato' },
    { key: 'poppins', value: 'Poppins' },
    { key: 'sourcesanspro', value: 'Source Sans Pro' },
    { key: 'robotocondensed', value: 'Roboto Condensed' },
    { key: 'oswald', value: 'Oswald' },
    { key: 'robotomono', value: 'Roboto Mono' },
    { key: 'raleway', value: 'Raleway' },
    { key: 'inter', value: 'Inter' },
    { key: 'notosans', value: 'Noto Sans' },
    { key: 'ubuntu', value: 'Ubuntu' },
    { key: 'mukta', value: 'Mukta' },
    { key: 'robotoslab', value: 'Roboto Slab' },
    { key: 'nunito', value: 'Nunito' },
    { key: 'playfairdisplay', value: 'Playfair Display' },
    { key: 'ptsans', value: 'PT Sans' },
    { key: 'nunitosans', value: 'Nunito Sans' },
    { key: 'merriweather', value: 'Merriweather' },
    { key: 'rubik', value: 'Rubik' },
    { key: 'notosanskr', value: 'Noto Sans KR' },
    { key: 'worksans', value: 'Work Sans' },
    { key: 'lora', value: 'Lora' },
    { key: 'firasans', value: 'Fira Sans' },
]

const state = {
    filter: '',
    placeholder: 'Pick a font',
    filterEl: null,
    optionsEl: null,
    options: [],
}

const deactivateSelector = () => {
    console.log('deactivateSelector')
    state.optionsEl.style.display = 'none'
    setPlaceholder()
}

// const handleFilterBlur = () => {
//     setPlaceholder()
// }

const handleFilterFocus = () => {
    state.optionsEl.style.display = 'inline'
    state.filterEl.placeholder = ''
    setOptions()
}

const handleFilterKeyup = (event) => {
    // console.log('handlerFilterKeyup')
    // console.log(event)
    const pressedKey = event.key.toLowerCase()
    if (pressedKey === 'enter') {
        console.log('ENTER - TODO: Do update here')
        // if (state.options.length > 0) {
        //     console.log(state.options[0])
        // } else {
        //     console.log('no valid selection')
        // }
    } else {
        setOptions()
    }
}

const handleOptionsInput = (event) => {
    console.log(event.target.value)
}

const handlePageClick = (event) => {
    // console.log('handlePageClick')
    if (!event.target.id) {
        deactivateSelector()
    } else {
        const idParts = event.target.id.split('--')
        if (idParts[0] !== 'awsselect') {
            deactivateSelector()
        } else {
            console.log('GOT AN ITEM')
        }
    }

    // if (clickId) {
    //     const idParts = clickId.split('--')
    //     if (idParts[0] !== 'awsselectmenu') {
    //         removeSelections()
    //     } else {
    //         if (idParts[1] === 'choice-id') {
    //             setSelectionFromKey(idParts[2])
    //             defocusInput()
    //         }
    //     }
    // } else {
    //     removeSelections()
    // }
}

const removeOptions = () => {
    const selectionsEl = document.getElementById('awsselect--options')
    while (selectionsEl.firstChild) {
        selectionsEl.removeChild(selectionsEl.firstChild)
    }
}

const setOptions = () => {
    state.options = []
    state.filter = state.filterEl.value
    fontsByPopularity.forEach((font) => {
        if (state.filter) {
            if (font.value.toLowerCase().includes(state.filter.toLowerCase())) {
                state.options.push(font)
            }
        } else {
            state.options.push(font)
        }
    })
    updateOptions()
}

const setPlaceholder = (newValue = null) => {
    if (newValue) {
        state.placeholder = newValue
    }
    state.filterEl.placeholder = state.placeholder
}

const updateOptions = () => {
    removeOptions()
    state.options.forEach((font) => {
        const newOption = document.createElement('option')
        newOption.value = font.key
        newOption.innerHTML = font.value
        newOption.id = `awsselect--selection--${font.key}`
        state.optionsEl.appendChild(newOption)
    })
}

const kickoff = () => {
    console.log('kickoff')
    state.filterEl = document.getElementById('awsselect--filter')
    state.filterEl.addEventListener('focus', handleFilterFocus)
    // state.filterEl.addEventListener('blur', handleFilterBlur)
    state.filterEl.addEventListener('keyup', handleFilterKeyup)
    state.optionsEl = document.getElementById('awsselect--options')
    state.optionsEl.addEventListener('input', handleOptionsInput)
    setPlaceholder()
    updateOptions()
    document.addEventListener('click', handlePageClick)
}

document.addEventListener('DOMContentLoaded', kickoff)

    </script>
  </head>
  <body class="line-numbers">
    <header>
      <a href="/">Cookbook Home</a> ~
      <a href="https://www.alanwsmith.com/">alanwsmith.com</a> ~
      <a href="https://links.alanwsmith.com">links</a> ~
      <a href="https://podcast.alanwsmith.com/">podcast</a> ~
      <a href="https://https://twitter.com/TheIdOfAlan">twitter</a>
    </header>
    <main>
      <h1>Search Input Example</h1>
      <h2>TL;DR</h2>
      <input
  id="awsselect--filter"
  type="text"
  autocomplete="off"
  spellcheck="false"
/>
<br />
<select id="awsselect--options" style="display: none" size="5"></select>

<h4>Notes</h4>
<ul>
  <li>
    This is not current the search input type. I'm playing around with trying to
  </li>
</ul>
  
            <h2>HTML</h2>
            <pre><code class="language-html">&lt;input
  id=&quot;awsselect--filter&quot;
  type=&quot;text&quot;
  autocomplete=&quot;off&quot;
  spellcheck=&quot;false&quot;
/&gt;
&lt;br /&gt;
&lt;select id=&quot;awsselect--options&quot; style=&quot;display: none&quot; size=&quot;5&quot;&gt;&lt;/select&gt;

&lt;h4&gt;Notes&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    This is not current the search input type. I&#x27;m playing around with trying to
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
             
            <h2>CSS</h2>
            <pre><code class="language-css">/* Any styles for the page go here */
</code></pre>
             
            <h2>JavaScript</h2>
            <pre><code class="language-js">const fontsByPopularity = [
    { key: &#x27;roboto&#x27;, value: &#x27;Roboto&#x27; },
    { key: &#x27;opensans&#x27;, value: &#x27;OpenSans&#x27; },
    { key: &#x27;montserrat&#x27;, value: &#x27;Montserrat&#x27; },
    { key: &#x27;lato&#x27;, value: &#x27;Lato&#x27; },
    { key: &#x27;poppins&#x27;, value: &#x27;Poppins&#x27; },
    { key: &#x27;sourcesanspro&#x27;, value: &#x27;Source Sans Pro&#x27; },
    { key: &#x27;robotocondensed&#x27;, value: &#x27;Roboto Condensed&#x27; },
    { key: &#x27;oswald&#x27;, value: &#x27;Oswald&#x27; },
    { key: &#x27;robotomono&#x27;, value: &#x27;Roboto Mono&#x27; },
    { key: &#x27;raleway&#x27;, value: &#x27;Raleway&#x27; },
    { key: &#x27;inter&#x27;, value: &#x27;Inter&#x27; },
    { key: &#x27;notosans&#x27;, value: &#x27;Noto Sans&#x27; },
    { key: &#x27;ubuntu&#x27;, value: &#x27;Ubuntu&#x27; },
    { key: &#x27;mukta&#x27;, value: &#x27;Mukta&#x27; },
    { key: &#x27;robotoslab&#x27;, value: &#x27;Roboto Slab&#x27; },
    { key: &#x27;nunito&#x27;, value: &#x27;Nunito&#x27; },
    { key: &#x27;playfairdisplay&#x27;, value: &#x27;Playfair Display&#x27; },
    { key: &#x27;ptsans&#x27;, value: &#x27;PT Sans&#x27; },
    { key: &#x27;nunitosans&#x27;, value: &#x27;Nunito Sans&#x27; },
    { key: &#x27;merriweather&#x27;, value: &#x27;Merriweather&#x27; },
    { key: &#x27;rubik&#x27;, value: &#x27;Rubik&#x27; },
    { key: &#x27;notosanskr&#x27;, value: &#x27;Noto Sans KR&#x27; },
    { key: &#x27;worksans&#x27;, value: &#x27;Work Sans&#x27; },
    { key: &#x27;lora&#x27;, value: &#x27;Lora&#x27; },
    { key: &#x27;firasans&#x27;, value: &#x27;Fira Sans&#x27; },
]

const state = {
    filter: &#x27;&#x27;,
    placeholder: &#x27;Pick a font&#x27;,
    filterEl: null,
    optionsEl: null,
    options: [],
}

const deactivateSelector = () =&gt; {
    console.log(&#x27;deactivateSelector&#x27;)
    state.optionsEl.style.display = &#x27;none&#x27;
    setPlaceholder()
}

// const handleFilterBlur = () =&gt; {
//     setPlaceholder()
// }

const handleFilterFocus = () =&gt; {
    state.optionsEl.style.display = &#x27;inline&#x27;
    state.filterEl.placeholder = &#x27;&#x27;
    setOptions()
}

const handleFilterKeyup = (event) =&gt; {
    // console.log(&#x27;handlerFilterKeyup&#x27;)
    // console.log(event)
    const pressedKey = event.key.toLowerCase()
    if (pressedKey === &#x27;enter&#x27;) {
        console.log(&#x27;ENTER - TODO: Do update here&#x27;)
        // if (state.options.length &gt; 0) {
        //     console.log(state.options[0])
        // } else {
        //     console.log(&#x27;no valid selection&#x27;)
        // }
    } else {
        setOptions()
    }
}

const handleOptionsInput = (event) =&gt; {
    console.log(event.target.value)
}

const handlePageClick = (event) =&gt; {
    // console.log(&#x27;handlePageClick&#x27;)
    if (!event.target.id) {
        deactivateSelector()
    } else {
        const idParts = event.target.id.split(&#x27;--&#x27;)
        if (idParts[0] !== &#x27;awsselect&#x27;) {
            deactivateSelector()
        } else {
            console.log(&#x27;GOT AN ITEM&#x27;)
        }
    }

    // if (clickId) {
    //     const idParts = clickId.split(&#x27;--&#x27;)
    //     if (idParts[0] !== &#x27;awsselectmenu&#x27;) {
    //         removeSelections()
    //     } else {
    //         if (idParts[1] === &#x27;choice-id&#x27;) {
    //             setSelectionFromKey(idParts[2])
    //             defocusInput()
    //         }
    //     }
    // } else {
    //     removeSelections()
    // }
}

const removeOptions = () =&gt; {
    const selectionsEl = document.getElementById(&#x27;awsselect--options&#x27;)
    while (selectionsEl.firstChild) {
        selectionsEl.removeChild(selectionsEl.firstChild)
    }
}

const setOptions = () =&gt; {
    state.options = []
    state.filter = state.filterEl.value
    fontsByPopularity.forEach((font) =&gt; {
        if (state.filter) {
            if (font.value.toLowerCase().includes(state.filter.toLowerCase())) {
                state.options.push(font)
            }
        } else {
            state.options.push(font)
        }
    })
    updateOptions()
}

const setPlaceholder = (newValue = null) =&gt; {
    if (newValue) {
        state.placeholder = newValue
    }
    state.filterEl.placeholder = state.placeholder
}

const updateOptions = () =&gt; {
    removeOptions()
    state.options.forEach((font) =&gt; {
        const newOption = document.createElement(&#x27;option&#x27;)
        newOption.value = font.key
        newOption.innerHTML = font.value
        newOption.id = `awsselect--selection--${font.key}`
        state.optionsEl.appendChild(newOption)
    })
}

const kickoff = () =&gt; {
    console.log(&#x27;kickoff&#x27;)
    state.filterEl = document.getElementById(&#x27;awsselect--filter&#x27;)
    state.filterEl.addEventListener(&#x27;focus&#x27;, handleFilterFocus)
    // state.filterEl.addEventListener(&#x27;blur&#x27;, handleFilterBlur)
    state.filterEl.addEventListener(&#x27;keyup&#x27;, handleFilterKeyup)
    state.optionsEl = document.getElementById(&#x27;awsselect--options&#x27;)
    state.optionsEl.addEventListener(&#x27;input&#x27;, handleOptionsInput)
    setPlaceholder()
    updateOptions()
    document.addEventListener(&#x27;click&#x27;, handlePageClick)
}

document.addEventListener(&#x27;DOMContentLoaded&#x27;, kickoff)
</code></pre>
            
         
                <h2>References</h2>
                <ul>
                    <li><a href=""></a></li>
                </ul>
                
    </main>
    <footer>
      made by <a href="https://twitter.com/TheIdOfAlan">alan w. smith</a>
      <br />
      who has a <a href="https://www.alanwsmith.com">website</a> and a
      <a href="https://podcast.alanwsmith.com/">podcast</a> <br />
      among other <a href="https://links.alanwsmith.com">things</a>
    </footer>
    <script src="/styles/prism.js"></script>
  </body>
</html>