<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Change Content Based On Basic Scroll Position - The HTML, CSS, and JavaScript Cookbook Of Alan</title>
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Change Content Based On Basic Scroll Position" />
    <meta property="og:description" content="" />
    <meta
      property="og:image"
      content="https://res.cloudinary.com/awsimages/image/upload/w_1200,h_630,w_1200,h_630,c_fit,w_940,h_540,co_rgb:eeeeee,l_text:Helvetica_94_bold:Change%20Content%20Based%20On%20Basic%20Scroll%20Position/fl_layer_apply,g_north_west,x_60,y_60/co_rgb:666666,l_text:Inconsolata_36_bold:from%20alan%20w.%20smith/fl_layer_apply,g_south_east,x_196,y_40/og-images/black-with-white-line.jpg"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site:id" content="@TheIdOfAlan" />
    <meta name="twitter:creator" content="@TheIdOfAlan" />
    <link
      rel="icon"
      type="image/png"
      sizes="228x228"
      href="/favicons/228x228.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="180x180"
      href="/favicons/180x180.png"
    />

    <link rel="stylesheet" href="/styles/reset.css" />
    <link rel="stylesheet" href="/styles/fonts.css" />
    <link rel="stylesheet" href="/styles/colors.css" />
    <link rel="stylesheet" href="/styles/wrapper.css" />
    <link rel="stylesheet" href="/styles/prism-customized.css" />
    
    <style>
      :root {
  --area-height: 18rem;
  --top-padding: 1rem;
}

#scrollArea {
  border: 1px solid black;
  height: var(--area-height);
  overflow-y: auto;
  width: 22rem;
  padding-top: var(--top-padding);
}

#scrollArea li {
  padding-bottom: 4rem;
  margin: 0;
}

#scrollArea li:last-child {
  height: calc(var(--area-height) - var(--top-padding));
}

    </style>

    <!--
    <link rel="stylesheet" href="/styles/highlightjs/_custom-base16-atelier-sulphurpool.min.css" />
    <script src="/assets/highlight/highlight.min.js"></script>
    -->

    <script>
      // This file can be used to represent
// and data that should be held outside
// of the main script

const c = {
  alfa: 'bravo',
}

      function handleIntersect(entries, observer) {
  entries.forEach((entry) => {
    if (
      entry.boundingClientRect.top < entry.rootBounds.top &&
      entry.boundingClientRect.bottom > entry.rootBounds.top
    ) {
      window.currentId.innerHTML = entry.target.id
    } else if (
      entry.boundingClientRect.top < entry.rootBounds.top &&
      entry.boundingClientRect.bottom < entry.rootBounds.top
    ) {
      window.currentId.innerHTML = entry.target.nextElementSibling.id
    }
  })
}

function createObserver() {
  const options = {
    root: window.scrollArea,
    rootMargin: '0px',
    threshold: 0,
  }
  const observer = new IntersectionObserver(handleIntersect, options)
  const els = document.getElementsByTagName('li')
  for (let i = 0; i < els.length; i++) {
    observer.observe(els[i])
  }
}

window.addEventListener('load', createObserver)

    </script>
  </head>
  <body class="line-numbers">
    <header>
      <a href="/">cookbook home</a> ~
      <a href="https://www.alanwsmith.com/">main site</a> ~
      <a href="https://links.alanwsmith.com">links</a> ~
      <a href="https://podcast.alanwsmith.com/">podcast</a> ~
      <a href="https://hachyderm.io/web/@TheIdOfAlan">mastodon</a>
    </header>
    <main>
      <h1>Change Content Based On Basic Scroll Position</h1>
      
                <h2>Details</h2>
                <ul>
                    <li>Goal: This code shows how to trigger an event and make an update to a page with the Intersection Observer when content scrolls to a certain point.</li> <li>Goal: The demonstration area contains a &quot;ul&quot; with several &quot;li&quot; children. When each child element reaches the top of the demo box the display value changes to the show the id of the &quote;li&quot;</li> <li>The example below is built directly from the HTML and JavaScript code snippets that follow</li>
                </ul>
                

      <h2>EXAMPLE</h2>
      <div id="currentId">item1</div>

<div id="scrollArea">
  <ol>
    <li id="item1">
      The curtain rose and the show was on. The birch canoe slid on the smooth
      planks. Glue the sheet to the dark blue background. It's easy to tell the
      depth of a well.
    </li>
    <li id="item2">
      Rice is often served in round bowls. The box was thrown beside the parked
      truck. The source of the huge river is the clear spring.
    </li>
    <li id="item3">
      Jazz and swing fans like fast music. The map had an X that meant nothing.
      Some ads serve to cheat buyers. On the islands the sea breeze is soft and
      mild. Add salt before you fry the egg. The houses are built of red clay
      bricks.
    </li>
    <li id="item4">
      A castle built from sand fails to endure. Tack the strip of carpet to the
      worn floor. Pour the stew from the pot into the plate.
    </li>
    <li id="item5">
      The drip of the rain made a pleasant sound. Smoke poured out of every
      crack. Much of the story makes good sense.
    </li>
    <li id="item6">
      Drop the ashes on the worn old rug. The desk and both chairs were painted
      tan. Throw out the used paper cup and plate.
    </li>
  </ol>
</div>


      <br />
      <br />
      <br />
      <hr />
       
            <h2>HTML Source</h2>
            <pre class="exampleCode" id="exampleHTMLBody"><code class="language-html">&lt;div id=&quot;currentId&quot;&gt;item1&lt;/div&gt;

&lt;div id=&quot;scrollArea&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;item1&quot;&gt;
      The curtain rose and the show was on. The birch canoe slid on the smooth
      planks. Glue the sheet to the dark blue background. It&#x27;s easy to tell the
      depth of a well.
    &lt;/li&gt;
    &lt;li id=&quot;item2&quot;&gt;
      Rice is often served in round bowls. The box was thrown beside the parked
      truck. The source of the huge river is the clear spring.
    &lt;/li&gt;
    &lt;li id=&quot;item3&quot;&gt;
      Jazz and swing fans like fast music. The map had an X that meant nothing.
      Some ads serve to cheat buyers. On the islands the sea breeze is soft and
      mild. Add salt before you fry the egg. The houses are built of red clay
      bricks.
    &lt;/li&gt;
    &lt;li id=&quot;item4&quot;&gt;
      A castle built from sand fails to endure. Tack the strip of carpet to the
      worn floor. Pour the stew from the pot into the plate.
    &lt;/li&gt;
    &lt;li id=&quot;item5&quot;&gt;
      The drip of the rain made a pleasant sound. Smoke poured out of every
      crack. Much of the story makes good sense.
    &lt;/li&gt;
    &lt;li id=&quot;item6&quot;&gt;
      Drop the ashes on the worn old rug. The desk and both chairs were painted
      tan. Throw out the used paper cup and plate.
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</code></pre>
             
            <h2>CSS Source</h2>
            <pre class="exampleCode" id="exampleCSS"><code class="language-css">:root {
  --area-height: 18rem;
  --top-padding: 1rem;
}

#scrollArea {
  border: 1px solid black;
  height: var(--area-height);
  overflow-y: auto;
  width: 22rem;
  padding-top: var(--top-padding);
}

#scrollArea li {
  padding-bottom: 4rem;
  margin: 0;
}

#scrollArea li:last-child {
  height: calc(var(--area-height) - var(--top-padding));
}
</code></pre>
             
            <h2>JavaScript Source</h2>
            <pre class="exampleCode" id="exampleJS"><code class="language-js">function handleIntersect(entries, observer) {
  entries.forEach((entry) =&gt; {
    if (
      entry.boundingClientRect.top &lt; entry.rootBounds.top &amp;&amp;
      entry.boundingClientRect.bottom &gt; entry.rootBounds.top
    ) {
      window.currentId.innerHTML = entry.target.id
    } else if (
      entry.boundingClientRect.top &lt; entry.rootBounds.top &amp;&amp;
      entry.boundingClientRect.bottom &lt; entry.rootBounds.top
    ) {
      window.currentId.innerHTML = entry.target.nextElementSibling.id
    }
  })
}

function createObserver() {
  const options = {
    root: window.scrollArea,
    rootMargin: &#x27;0px&#x27;,
    threshold: 0,
  }
  const observer = new IntersectionObserver(handleIntersect, options)
  const els = document.getElementsByTagName(&#x27;li&#x27;)
  for (let i = 0; i &lt; els.length; i++) {
    observer.observe(els[i])
  }
}

window.addEventListener(&#x27;load&#x27;, createObserver)
</code></pre>
             
            <h2>JSON Data Source</h2>
            <pre class="exampleCode" id="exampleJSON"><code class="language-json">{
  &quot;note&quot;: &quot;Example JSON data file&quot;
}
</code></pre>
            
      
            <h2>Config JS Source</h2>
            <pre class="exampleCode" id="exampleCONFIG"><code class="language-js">// This file can be used to represent
// and data that should be held outside
// of the main script

const c = {
  alfa: &#x27;bravo&#x27;,
}
</code></pre>
               
    </main>
    <footer>
      from <a href="https://www.alanwsmith.com/">alan w. smith</a>
    </footer>
    <script src="/styles/prism.js"></script>
  </body>
</html>
