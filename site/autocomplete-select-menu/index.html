<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Autocomplete Selection Menu - The HTML, CSS, and JavaScript Cookbook Of Alan</title>
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Autocomplete Selection Menu" />
    <meta property="og:description" content="An selection menu with autocompletion that only allows for the configure values to be selected" />
    <meta
      property="og:image"
      content="https://res.cloudinary.com/awsimages/image/upload/w_1200,h_630/c_fit,co_rgb:222222,l_text:Helvetica_72_bold:Autocomplete%20Selection%20Menu,w_1080,h_480/fl_layer_apply,g_north_west,x_70,y_70/og-images/html-css-js--og-2022-10-24-blank.png"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site:id" content="@TheIdOfAlan" />
    <meta name="twitter:creator" content="@TheIdOfAlan" />
    <link
      rel="icon"
      type="image/png"
      sizes="228x228"
      href="/favicons/228x228.png"
    />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="180x180"
      href="/favicons/180x180.png"
    />
    <link rel="stylesheet" href="/styles/global.css" />
    <link rel="stylesheet" href="/styles/prism.css" />
    

    <style>
      #selection-text-field {
    background-color: white;
    height: 1.4rem;
    padding: 4px;
    color: black;
}

    </style>
    <script>
      const itemList = [
    'Roboto',
    'Open Sans',
    'Noto Sans JP',
    'Montserrat',
    'Lato',
    'Poppins',
    'Source Sans Pro',
    'Roboto Condensed',
    'Oswald',
    'Roboto Mono',
    'Raleway',
    'Inter',
    'Noto Sans',
    'Ubuntu',
    'Mukta',
    'Roboto Slab',
    'Nunito',
    'Playfair Display',
    'PT Sans',
    'Nunito Sans',
    'Merriweather',
    'Rubik',
    'Noto Sans KR',
    'Work Sans',
    'Lora',
    'Fira Sans',
]

const activeList = []

const updateItems = (filter) => {
    const itemWrapper = document.getElementById('menuItems')
    while (itemWrapper.children.length > 0) {
        itemWrapper.children[0].remove()
    }
    if (filter) {
        activeList.length = 0
        const pattern = new RegExp(filter, 'gi')
        itemList.forEach((item) => {
            const compareItem = item.toLowerCase()
            if (item.toLowerCase().match(pattern)) {
                activeList.push(item)
            }
        })
    }
    const itemCount = Math.min(5, activeList.length)
    for (let i = 0; i < itemCount; i++) {
        const newItem = document.createElement('button')
        // TODO: Make this a valid key
        newItem.id = `item--${activeList[i]}`
        newItem.innerHTML = activeList[i]
        itemWrapper.appendChild(newItem)
    }
}

const handleMenuClick = (event) => {
    console.log(event)
}

const handleMenuInput = (event) => {
    console.log(event)
    const textFilter = document
        .getElementById('font-input-field')
        .innerText.trim()
    console.log(`-${textFilter}-`)
    updateItems(textFilter)
}

const handleKeyUp = (event) => {
    if (event.key.toLowerCase() === 'enter') {
        console.log(activeList[0])
    }
}

const kickoff = () => {
    console.log(`Kickoff: ${new Date().getTime()}`)
    // clear for refreshes during testing
    document.getElementById('font-input-field').value = ''
    document
        .getElementById('menuWrapper')
        .addEventListener('click', handleMenuClick)
    document
        .getElementById('menuWrapper')
        .addEventListener('input', handleMenuInput)

    document
        .getElementById('menuWrapper')
        .addEventListener('keyup', handleKeyUp)

    updateItems()
}

document.addEventListener('DOMContentLoaded', kickoff)

    </script>
  </head>
  <body class="line-numbers">

    <header>
      <a href="/">Cookbook Home</a> ~
      <a href="https://www.alanwsmith.com/">alanwsmith.com</a> ~
      <a href="https://links.alanwsmith.com">links</a> ~
      <a href="https://podcast.alanwsmith.com/">podcast</a>
    </header>

    <main>
      <h1>Autocomplete Select Menu</h1>
      <p>This is a work in progress. It doesn't work yet.</p>
      <div id="tmp-focus-target-for-safari-fix"></div>

      <div id="active-selection">Active Selection: None</div>
<div id="selection-text-field" contenteditable="true"></div>
<div id="selections"></div>


      
            <h2>HTML</h2>
            <pre><code class="language-html">&lt;div id=&quot;active-selection&quot;&gt;Active Selection: None&lt;/div&gt;
&lt;div id=&quot;selection-text-field&quot; contenteditable=&quot;true&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;selections&quot;&gt;&lt;/div&gt;
</code></pre>
             
                <h2>Deatils</h2>
                <ul>
                    <li>GOAL: [ ] Accepts an array of key-value pairs to use as selections</li> <li>GOAL: [ ] Filter selections based on text input</li> <li>GOAL: [ ] Proper accessability</li> <li>GOAL: [ ] Show autocompete when typing</li> <li>GOAL: [ ] Show first option in text area if autocomplete doesn't match exactly</li> <li>GOAL: [ ] Clicking enter selects first item</li> <li>GOAL: [ ] Tabbing to secondary selections</li> <li>GOAL: [ ] Hitting enter on a secondary selection chooses it</li> <li>GOAL: [ ] Clicking a secondary button selects it</li> <li>GOAL: [ ] Show the last select item as a placeholder when the field isn't focused</li> <li>GOAL: [ ] Ability to select a placeholder on load</li> <li>GOAL: [ ] Scrollable list of selections</li>
                </ul>
                 
                <h2>Notes</h2>
                <ul>
                    <li>This is currnelyt a very naive approach to the matching selections. If the string in the input field matches anywhere in the item list it gets included.</li>
                </ul>
             
                <h2>TODO</h2>
                <ul>
                    <li>Dig through this for multiline suppression: https://stackoverflow.com/questions/6831482/contenteditable-single-line-input</li>
                </ul>
             
                <h2>References</h2>
                <ul>
                    <li><a href=""></a></li>
                </ul>
                

    </main>
    <footer>
      made by <a href="https://twitter.com/TheIdOfAlan">
      <br />
      who has a <a href="https://www.alanwsmith.com">website</a> and a
      <a href="https://podcast.alanwsmith.com/">podcast</a> <br />
      among other <a href="https://links.alanwsmith.com">things</a>
    </footer>
    <script src="/styles/prism.js"></script>
  </body>
</html>
